<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">PHP</h3>
  </div>
  <div class="panel-body">
    <h3>Creating a new shipment</h3>
    <p>
      This is a basic PHP example to create a shipment that already shows you how you could work
      with it afterwards.
    </p>
{% highlight php startinline=true %}


$headers = array(
  'Accept: application/json',
  'Content-Type: application/json',
);

$url = 'https://api.shipcloud.io/v1/shipments';
$method = 'POST';

$data = json_encode(array(
  'carrier' => 'DHL',
  'to' => array(
    'company' => 'Musterfirma',
    'first_name' => 'Hans',
    'last_name' => 'Meier',
    'street' => 'Musterstraße',
    'street_no' => '22',
    'city' => 'Musterstadt',
    'zip_code' => '12345',
    'country' => 'DE'
  ),
  'from' => array(
    'company' => 'Gewuerze Paderborn',
    'first_name' => 'Karl',
    'last_name' => 'Müller',
    'care_of' => 'Markus Mustermann',
    'street' => 'Musterstr.',
    'street_no' => '1',
    'city' => 'Paderborn',
    'zip_code' => '33089',
    'country' => 'DE'
  ),
  'package' => array(
    'width' => 20,
    'length' => 20,
    'height' => 20,
    'weight' => 1.5
  ),
  'reference_number' => 'ref123456',
  'service' => 'standard',
  'create_shipping_label' => 'true'
));

$handle = curl_init();
curl_setopt($handle, CURLOPT_URL, $url);
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
curl_setopt($handle, CURLOPT_USERPWD, "{{ site.apikey }}");
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt($handle, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($handle, CURLOPT_TIMEOUT, 30);

switch($method) {
  case 'GET':
    break;
  case 'POST':
    curl_setopt($handle, CURLOPT_POST, true);
    curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
    break;
  case 'PUT':
    curl_setopt($handle, CURLOPT_CUSTOMREQUEST, 'PUT');
    curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
    break;
  case 'DELETE':
    curl_setopt($handle, CURLOPT_CUSTOMREQUEST, 'DELETE');
    break;
}

echo $response = curl_exec($handle);
$code = curl_getinfo($handle, CURLINFO_HTTP_CODE);
curl_close($handle);

{% endhighlight %}
  </div>
</div>
