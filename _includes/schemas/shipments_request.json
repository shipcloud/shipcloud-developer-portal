{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "carrier": {
      "type": "string",
      "enum": ["dhl", "ups", "dpd", "hermes", "gls", "fedex"],
      "description": "acronym of the carrier you want to use"
    },
    "to": {
      "$ref": "#/definitions/address",
      "description": "the receivers address"
    },
    "from": {
      "$ref": "#/definitions/address",
      "description": "If missing, the default sender address (if defined in your shipcloud account) will be used"
    },
    "package": {
      "$ref": "#/definitions/package"
    },
    "service": {
      "type": "string",
      "enum": ["standard", "returns", "one_day", "one_day_early"],
      "default": "standard",
      "description": "The service that should be used for the shipment. standard: The standard (ground) service for each carrier, returns: Returns service, one_day: express delivery, one_day_early: express delivery until 10am."
    },
    "additional_services": {
      "type": "object",
      "properties": {
        "oneOf": [
            { "$ref": "#/definitions/dropAuthorization" },
            { "$ref": "#/definitions/cashOnDelivery" }
        ]
      },
      "required": ["name", "properties"]
    },
    "reference_number": {
      "type": "string",
      "description": "a reference number (max. 30 characters) that you want this shipment to be identified with. You can use this afterwards to easier find the shipment in the shipcloud.io backoffice"
    },
    "notification_email": {
      "type": "string",
      "description": "email address that we should notify once there's an update for this shipment"
    },
    "create_shipping_label": {
      "type": "boolean",
      "description": "determines if a shipping label should be created at the carrier (this means you will be charged)"
    }
  },
  "required": ["carrier", "to", "package"],
  "additionalProperties": false,
  "definitions": {
    "address": {
      "type": "object",
      "properties": {
        "company": { "type": "string" },
        "first_name": { "type": "string" },
        "last_name": { "type": "string" },
        "care_of": { "type": "string" },
        "street": { "type": "string" },
        "street_no": { "type": "string" },
        "city": { "type": "string" },
        "zip_code": { "type": "string" },
        "country": { "type": "string", "description": "Country as uppercase ISO 3166-1 alpha-2 code" },
        "phone": { "type": "string" }
      },
      "required": ["last_name", "street", "street_no", "city", "zip_code", "country"],
      "additionalProperties": false
    },
    "cashOnDelivery": {
      "name": {
        "type": "string",
        "enum": ["cash_on_delivery"]
      },
      "properties": {
        "type": "object",
        "description": "holding all necessary properties for cash on delivery",
        "properties": {
          "amount":  { "type": "number" },
          "currency":  {
            "type": "string",
            "enum": ["EUR"]
          },
          "bank_account_holder":  { "type": "string" },
          "bank_name":  { "type": "string" },
          "bank_account_number":  {
            "type": "string",
            "description": "IBAN code"
          },
          "bank_code":  {
            "type": "string",
            "description": "BIC code"
          }
        }
      }
    },
    "dropAuthorization": {
      "name": {
        "type": "string",
        "enum": ["drop_authorization"]
      },
      "properties": {
        "type": "object",
        "description": "holding all necessary properties for drop authorization",
        "properties": {
          "message":  {
            "type": "string",
            "description": "message you want to tell the carrier"
          }
        }
      }
    },
    "package": {
      "type": "object",
      "properties": {
        "width":  { "type": "number" },
        "height": { "type": "number" },
        "length": { "type": "number" },
        "weight": { "type": "number" },
        "declared_value": {
          "type": "object",
          "description": "describing the value of the package contents",
          "properties": {
            "amount": { "type": "number" },
            "currency": { "type": "string" }
          }
        }
      },
      "required": ["width", "height", "length", "weight"],
      "additionalProperties": false,
      "description": "defines package dimensions"
    }
  }
}
